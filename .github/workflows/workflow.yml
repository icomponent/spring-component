# 配置工作流
name: 工作流
# 在 pull request 时执行
on: pull_request

# 配置工作
jobs:
  # build 工作
  build:
    # 命名
    name: 项目构建
    # 工作策略
    strategy:
      matrix:
        os: [ubuntu-latest, ubuntu-16.04]
    # 运行于策略系统
    runs-on: ${{ matrix.os }}
    # 配置需要的镜像
    services:
      # 配置 mysql 镜像
      mysql:
        image: mysql:5.7.28
        env:
          MYSQL_ROOT_PASSWORD: root
          MYSQL_DATABASE: app
        ports:
          - 3306:3306
        command: mysqld --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci
    # 配置工作步骤
    steps:
    - name: 检出代码
      uses: actions/checkout@master

    - name: 安装JDK
      uses: actions/setup-java@master
      with:
        java-version: 1.8

    - name: 构建
      run: mvn -B package --file pom.xml
